<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <title>6th BAND - Goods</title>
    <link rel="icon" href="/public/img/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <link rel="stylesheet" href="/public/css/common.css">
    <link rel="stylesheet" href="/public/css/goods/goods.css">
</head>

<style>
</style>

<body>
<div id="root">
    <div class="wrapper">
        <!--/* 헤더 */-->
        <div th:replace="~{common/navi::topNavi}"></div>
        <div th:replace="~{common/navi::allMenuNavi}"></div>

        <!--/* 컨텐츠 */-->
        <div class="main">
            <!--/* APP GoodsDetailPage */-->
            <div class="container">
                <div class="row pt-3">
                    <div class="col px-0">

                        <div class="row align-items-center m-0 pt-1 pb-1">
                            <div class="col-2 ms-3">
                                <span class="material-symbols-outlined text-center new-fs-95 fw-bold" onclick="history.back()" >arrow_back_ios</span>
                            </div>
                            <div class="col-7 text-center fs-5 fw-medium"></div>
                        </div>

                        <div class="row mx-0 px-0 mt-2" style="box-sizing: border-box; max-width: 100%;">
                            <div class="col">
                                <div class="row">
                                    <div class="col mx-0 mb-3 px-0 text-center">
                                        <img class="img-fluid" th:src="|/images/${goodsDetail.goodsDetail.image}|"></img>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col new-fs-85 new-text-gray">
                                        6th ROCK FESTIVAL
                                    </div>
                                    <div class="col text-end">
                                        <button type="button" class="favorite-button new-input-none bg-white">
                                            <span data-heart-id="1" id="heartTop" data-heart="heartTop" class="material-symbols-outlined fs-2 text-danger">favorite</span>
                                        </button>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col fs-5" th:text="${goodsDetail.goodsDetail.goods_title}"></div>
                                </div>

                                <div class="row">
                                    <div class="col new-text-gray font-roboto new-fs-95 ms-4 ps-5 mt-3" th:text="${#numbers.formatDecimal(goodsDetail.goodsDetail.price,0,'COMMA',0,'POINT')}" style="text-decoration: line-through;">
                                        <!--/* 상품원가 */-->
                                    </div>
                                </div>
                                <div class="row" style="align-items: center;">
                                    <!-- 상품 할인율 -->
                                    <div class="col-auto fs-4 fw-medium text-danger font-roboto pe-0"
                                        th:text="${#lists.size(discounts) > 0 && discounts[0].discount != null ? #numbers.formatDecimal(discounts[0].discount, 0, 'COMMA', 0, 'POINT') + '%' : '0%'}">
                                    </div>
                                
                                    <!-- 상품 할인 적용가 -->
                                    <div class="col-auto fs-4 fw-medium font-roboto pe-0"
                                        th:text="${#lists.size(discounts) > 0 && discounts[0].discount != null ? #numbers.formatDecimal(goodsDetail.goodsDetail.price * (1 - discounts[0].discount / 100), 0, 'COMMA', 0, 'POINT') : #numbers.formatDecimal(goodsDetail.goodsDetail.price, 0, 'COMMA', 0, 'POINT')}">
                                    </div>
                                
                                    <div class="col-auto new-fs-9 px-0 fw-medium">원</div>
                                </div>


                                <!--/*  리뷰 앵커링  */-->
                                <a href="#reviewSection">
                                    <div class="row py-3">
                                        <!--/* 별점 가져오기 */-->
                                        <div class="col-auto new-fs-8 new-text-gray">
                                            <span class="averageRating"></span>
                                        </div>
                                        <div class="col-auto new-fs-8">
                                            <span class="fw-medium font-roboto"><span class="reviewCount new-text-gray"></span></span>개 리뷰
                                            <span class="material-symbols-outlined new-fs-7 align-items-end">arrow_forward_ios</span>
                                        </div>
                                    </div>
                                </a>

                                <div class="row mt-3 pt-3 border-top">
                                    <div class="col-auto new-text-gray fw-medium new-fs-7">신규회원</div>
                                    <div class="col-auto new-fs-7 font-roboto">299,000원, 신규가입 시 20% 쿠폰(최대할인가)</div>
                                </div>

                                <div class="row pt-3">
                                    <div class="col-auto new-text-gray fw-medium new-fs-7">추가혜택</div>
                                    <div class="col-auto new-fs-7 font-roboto">6th Band 삼성카드 30,000원 할인
                                        <span class="material-symbols-outlined new-fs-7 align-items-end text-end">arrow_forward_ios</span>
                                        <br>7만원 이상 첫결제 3만원할인<br>('일반결제'>'6th Band 삼성카드' <br>결제수단 선택시에만 적용)
                                    </div>
                                </div>

                                <div class="row pt-3">
                                    <div class="col-auto new-text-gray fw-medium new-fs-7">카드혜택</div>
                                    <div class="col-auto new-fs-7 font-roboto">최대 5개월 무이자
                                        <span class="material-symbols-outlined new-fs-7 align-items-end">arrow_forward_ios</span>
                                        <br>(35,800원 X 5개월)</div>
                                </div>

                                <div class="row pt-3">
                                    <div class="col-auto new-text-gray fw-medium new-fs-7">배송정보</div>
                                    <div class="col-auto new-fs-7 font-roboto">3일 이내 출고</div>
                                </div>

                                <div class="row pb-3 border-bottom border-5 new-fs-7 new-py-25">
                                    <div class="col-auto new-text-gray fw-medium">배송비용</div>
                                    <div class="col-auto">
                                        <div class="row">
                                            <div class="col-auto font-roboto">3,000원</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-auto">제주/도서산간 추가비용 없음</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row border-bottom border-1 new-py-25 text-center bg-white fw-medium sticky-top">
                                    <div class="col new-fs-8"><a class="goodsDetailText" href="#detailInfo">상세정보</a></div>
                                    <div class="col new-fs-8"><a class="goodsDetailText" href="#orderInfo">주문배송</a></div>
                                    <div class="col new-fs-8"><a class="goodsDetailText" href="#exchangeInfo">교환환불</a></div>
                                </div>

                                <!--/* 상세정보 */-->
                                <div id="detailInfo" class="row py-3 new-fs-8">
                                    <div class="col" th:text="${goodsDetail.goodsDetail.detail}"></div>
                                </div>

                                <!--/* 상세이미지 */-->
                                <div class="row">
                                    <div class="col-12 my-2 px-0" th:each="ImageList:${selectImageWithGoodsList}">
                                        <div th:if="${ImageList.goodsDetailImageDto.multiple_image} != null">
                                            <img class="img-fluid" th:src="|/images/${ImageList.goodsDetailImageDto.multiple_image}|"></img>
                                        </div>
                                        <div th:if="${ImageList.goodsDetailImageDto.multiple_image} == null">상세이미지가 없습니다</div>
                                    </div>
                                </div>
                                
                                <div id="orderInfo" class="row py-3 border-top border-bottom">
                                    <p class="d-inline-flex gap-1">
                                        <button class="btn btn-primary rounded-0 new-fs-85" type="button" data-bs-toggle="collapse" data-bs-target="#collapseProductDescription" aria-expanded="false" aria-controls="collapscollapseProductDescriptioneExample">
                                            [주문 및 배송 안내]
                                        </button>
                                    </p>
                                        <div class="collapse" id="collapseProductDescription">
                                        <div class="card card-body">
                                            <div class="row mx-2 new-fs-7">
                                            <span class="new-text-gray fw-medium ps-0">[주문 및 배송 안내]</span><br>
                                            <span class="new-text-gray fw-medium ps-0">[국내 일반 배송]</span>
                                            ・배송방식 : 6th ROCK FESTIVAL 물류센터 직접배송(CJ대한통운)<br>
                                            ・배송지역 : 전국(일부지역 제외)<br>
                                            ・배송비용 : 3,000원 <br>
                                            ・도서산간지역의 추가 배송비는 없습니다다.<br>
                                            ・배송기간 : 결제 후 5~10일 이내 (영업일 기준)<br>

                                            - 상품의 재고상황에 따라 배송기간이 다소 지연될 수도 있습니다.<br>
                                            - 물류센터 사정으로 인해 배송이 지연될 수 있습니다.<br>

                                            - 예약판매 상품 등 당일 배송이 어려운 상품을 함께 구매하는 경우<br>
                                            모든 상품이 배송 가능한 상태가 되는 시점에 주문하신 상품이 함께 배송됩니다.<br>
                                                (상품별 배송일정이 상이하오니 자세한 일정은 상품 상세페이지를 참고 바랍니다.)<br>
                                            - 기본 배송기간 이상 소요되는 상품이거나 품절된 상품은 개별 연락 드리겠습니다.<br>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="exchangeInfo" class="row py-3 border-bottom">
                                    <p class="d-inline-flex gap-1">
                                        <button class="btn btn-primary rounded-0 new-fs-85" type="button" data-bs-toggle="collapse" data-bs-target="#shippingInformation" aria-expanded="false" aria-controls="shippingInformation">
                                            [교환 및 환불 안내]
                                        </button>
                                    </p>
                                        <div class="collapse" id="shippingInformation">
                                        <div class="card card-body new-fs-7">
                                            <span class="new-text-gray fw-medium">[교환∙반품 방법]</span><br>

                                        - 교환/반품 신청은 상품을 공급 받은 날로부터 7일 이내 신청 바랍니다.<br>
                                        - 단, 상품의 내용이 표시, 광고의 내용과 다르거나 계약 내용과 다르게 이행된 경우에는 상품을 공급 받은 날로부터 3개월, 그 사실을 안 날 또는 알 수 있었던 날로부터 30일 이내 신청 가능합니다.<br>
                                        - 상품의 하자로 인해 교환을 신청할 경우 1:1문의 또는 CS CENTER(6666-6666)를 통해 접수 바랍니다.<br>
                                        - 첨부파일의 용량이 큰 경우 CSCENTER@FESTIVAL.COM으로 메일 발송 후 1:1문의 또는 CS CENTER(6666-6666)를 통해 접수 바랍니다.<br>


                                        ・상품교환∙반품단계<br>
                                        - Step1: 교환∙반품 기간확인<br>
                                        - Step2: 마이페이지 또는 1:1문의로 교환∙반품접수<br>
                                        - Step3: CS담당자의 안내에 따라 CJ대한통운(1588-1255)으로 직접 반품 신청 및 지정 반품지로 발송<br>
                                        - Step4: 반품지에 상품 입고 및 검품 후 교환∙반품 진행<br>
                                        - Step5: 교환∙반품 완료<br><br>


                                        ・교환∙반품 Tip!<br>
                                        - 상품하자로 인한 교환∙반품 신청 시 빛 반사가 없는 상태에서 정면으로 촬영해주시면 보다 빠른 상담이 가능합니다.<br>
                                        - 상품 또는 상품의 구성품으로 인한 교환∙반품 신청 시 개봉영상을 전달 주시면 보다 빠른 상담이 가능합니다.<br>
                                        - 개봉영상은 개봉 전 박스의 모든 면이 보이고, 상품 개봉 장면이 온전히 보이도록 촬영 후 첨부 부탁드립니다.<br>
                                        - 만약, 개봉영상을 촬영하지 않으셨을 경우 상품 및 상품의 구성품 전체가 한 프레임 안에 보이도록 사진 촬영 후 첨부해주시면 됩니다.<br><br>


                                        <span class="new-text-gray fw-medium">[교환∙반품시 유의사항]</span><br>
                                        - 상품의 색상은 모니터 사양에 따라 실제 색상과 다소 차이가 있을 수 있으며 상품의 라벨 위치나 색상은 이미지와 다를 수 있습니다.<br>
                                        - 상품의 프린트 혹은 패턴이 있는 경우 상품 상세페이지 이미지와 다를 수 있습니다.<br>
                                        - 구성품이 랜덤인 상품인 경우, 교환 신청 시 교환 상품 또한 랜덤으로 발송 됩니다.<br>
                                        - 교환/반품 진행 시 이벤트, 프로모션으로 증정된 사은품을 함께 보내주셔야 합니다.<br>
                                        - 모든 반품/교환은 전자상거래 등에서의 소비자 보호에 관한 법률 및 동법 시행령에 따릅니다.<br><br>


                                        ・교환∙반품 가능기간<br>
                                        - 고객변심 : 상품을 공급 받은 날로부터 7일 이내 접수 가능합니다.<br>
                                        - 배송오류, 파손, 불량 등 상품 결함 : 상품을 공급 받은 날로부터 3개월, 그 사실을 안 날 또는 알 수 있었던 날부터 30일 이내 접수 가능합니다.<br><br>


                                        ・교환∙반품 불가한 경우<br>
                                        - 상품 수령 후 교환·반품 가능 기간을 초과한 경우<br>
                                        - 고객 귀책 사유로 상품 등이 멸실 또는 훼손된 경우. (단, 상품의 내용을 확인하기 위하여 포장 등을 훼손한 경우는 제외)<br>
                                        - 구매자의 사용 또는 일부 소비에 의하여 상품의 가치가 현저히 감소한 경우<br>
                                        - 시간의 경과에 의하여 재판매가 곤란할 정도로 상품 등의 가치가 현저히 감소한 경우(상품 바코드 제거, 수선 등)<br>
                                        - 주문제작 상품으로 이미 제작이 시작된 상품<br>
                                        (판매자에게 회복할 수 없는 중대한 피해가 예상되며, 청약철회가 제한된다는 사실을 미리 상세 페이지에 공지하였고 해당 사실을 서면 동의 받은 경우)<br>
                                        - 복제가 가능한 상품 등의 포장을 훼손한 경우 (DVD, CD, 포토카드, 포스터 등 복제가 가능한 상품의 포장 개봉 시)<br>
                                        - 6th ROCK FESTIVAL 온라인스토어에서 구매한 상품을 공식 오프라인 매장에서 교환/환불하는 경우<br>
                                        - 공식 오프라인 매장에서 구매한 상품을 6th ROCK FESTIVAL 온라인스토어에서 교환/환불하는 경우<br>
                                        - 각 상품별 교환/환불 정책은 차이가 있을 수 있으며 자세한 사항은 상품정보에서 확인 바랍니다.<br>
                                        (자세한 내용은 1:1문의 또는 CS CENTER(6666-6666))<br><br>


                                        ・교환∙반품 비용<br>
                                        - 변심 : 단순 변심으로 반품을 원할 경우에는 구매자가 왕복배송비 지불<br>
                                        - 배송오류, 파손, 불량 등 상품 결함 : 상품하자, 오배송의 경우에는 판매자가 배송비 지불<br>
                                        (정확한 교환∙반품비용은 1:1문의 또는 CS CENTER를 이용해 주시기 바랍니다)<br><br>


                                        <span class="new-text-gray fw-medium">[미성년자 권리보호안내]</span><br>
                                        미성년 고객께서 상품을 주문(계약) 하시는 경우, 법정대리인(부모님 등)이 그 주문(계약)에 동의하지 않으면 미성년자 본인 또는 법정대리인(부모님 등)이 그 주문(계약)을 취소하실 수 있습니다.<br>
                                        </div>
                                        </div>
                                </div>

                                <!--/* 작성된 리뷰불러오기 */-->
                                <div class="row pt-3 pb-3 border-bottom">
                                    <div id="reviewSection" class="col-auto new-fs-8">
                                        리뷰(<span class="reviewCount"></span>)
                                    </div>
                                    <div class="col-auto">
                                        <span class="averageRating"></span>
                                    </div>
                                </div>
                                
                                <div class="row" id="noReviewsMessage" style="display: none;">
                                    <div class="col text-center my-5 py-4">
                                        등록된 리뷰가 없습니다.
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col">
                                        <div id="reviewListBox"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!--/* 주문하기 푸터고정 */-->
                <div class="row border-top new-fixed-bottom bg-white px-2 py-3 align-items-center" style="z-index: 1021;">
                    <div class="col-auto">
                        <!--/* 위시리스트 */-->
                            <input type="hidden" name="goods_id" th:value="${goodsDetail.goodsDetail.id}">
                            <button type="button" class="favorite-button new-btn-none bg-white">
                                <span data-heart-id="2" id="heart" data-heart="heart" class="material-symbols-outlined fs-2 text-danger">favorite</span>
                            </button>
                        <div class="text-center wishCount new-fs-75 lh-1">
                        </div>
                    </div>
                    <div class="col d-grid p-0">
                        <button class="btn btn-primary justify-content-center align-items-center fw-medium rounded-0 py-2" 
                        type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">구매하기</button>
                    </div>

                </div>
            </div>
            
        <!--/* 푸터 */-->
        <div th:replace="~{common/navi::bottomNavi}"></div>
    </div>
</div>

</div>
<!--/* offcanvas */-->
<div class="offcanvas offcanvas-bottom custom-offcanvas" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel" style="height: 23em; overflow-x: hidden !important; width: 100%;">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasBottomLabel"></h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body small">
        <form action="/goods/goodsCartProcess" method="post">
            <input type="hidden" name="goods_id" th:value="${goodsDetail.goodsDetail.id}">

            <div class="row">
                <div class="col border mx-2 mb-3 py-3">
                    <div class="row mx-2">
                        <div class="col mb-3 new-fs-8" th:text="${goodsDetail.goodsDetail.goods_title}"></div>
                    </div>
                    <div class="row mx-2 align-items-center">
                        <div class="col">
                            <div class="input-group">
                                <button class="btn btn-outline-secondary" type="button" id="decreaseBtn">-</button>
                                <input type="number" name="item_count" class="form-control text-center" id="itemCount" value="1" min="1" max="20">
                                <button class="btn btn-outline-secondary" type="button" id="increaseBtn">+</button>
                            </div>
                        </div>
                        <div class="col text-end pe-2" id="priceDisplay" th:data-unit-price="${goodsDetail.goodsDetail.price}"
                        ><span id="totalPrice"></span></div>
                    </div>

                    <div class="row mx-2 mt-2">
                        <div clss="col">
                            <span class="material-symbols-outlined new-fs-75">info</span>
                            <span class="new-fs-75">최대 20개 주문 가능합니다.</span>
                        </div>
                    </div>
                </div>
                
                <div class="row gap-3 ms-2">
                    <div class="col border-bottom border-2 mx-4 my-3 text-center new-fs-8">총 상품 금액</div>
                    <div class="col border-bottom border-2 mx-4 my-3 text-center new-fs-8"><span id="totalPrice2"></span></div>
                </div>
            </div>

            <div class="row">
                <div class="col d-grid mx-1 pt-2 border-none px-0">
                    <button type="submit" name="cart" value="order" class="fw-medium py-2 ms-2 btn btn-outline-primary rounded-0">바로 구매</button>
                </div>
                <div class="col d-grid mx-1 pt-2 border-none px-0">
                    <button type="submit" name="cart" value="cart" class="fw-medium py-2 ms-2 btn btn-primary rounded-0" onclick="return confirmAddToCart()">
                        쇼핑백 담기
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>


<!--/* 하나의 리뷰 */-->
<div id="template" class="d-none">
    <div class="reviewWrapper row border-bottom py-3">
        <div class="col">
        
            <div class="row align-items-center">
                <div class="col-auto">
                    <img class="userImage img-fluid image-thumbnail rounded-circle" style="height:2.5em; width: 2.5em;" />
                </div>
                <div class="col">
                    <div class="row justify-content-center align-items-end">
                        <div class="col-auto reviewUserNickName new-fs-75 px-0">
                            <!--/* 유저닉네임 */-->
                        </div>
                        <div class="col text-end mb-1">
                            <span class="reviewDeleteButton border-bottom new-fs-7 new-text-gray fw-medium d-none">리뷰삭제</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-auto reviewRating new-fs-85 px-0">
                            <!--/* 별점가져오기 */-->
                        </div>
                        <div class="col text-end reviewDate new-fs-75 font-roboto pb-2">
                            <!--/* 리뷰 등록일 */-->
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <div class="row">
                        <div class="col reviewGoodsTitle new-text-gray new-fs-7">
                            <!--/* 상품제목 */-->
                        </div>
                    </div>
                    <div class="row">
                        <div class="col reviewContent new-fs-85">
                            <!--/* 리뷰내용 */-->
                        </div>
                    </div>
                   
                    <!--/* 상세이미지 */-->
                    <div class="row pt-2">
                        <div class="col">
                            <div class="image-scroll-container">
                                <div class="reviewDetailImage"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row reviewLine">
                        <div class="col new-text-gray new-fs-7 mb-1 d-flex align-items-center">
                            <span class="material-symbols-outlined new-fw-thin fs-4 pe-1">smart_toy</span>
                            <span class="badge rounded-2 bg-primary new-text-white">Chat GPT</span>가 요약한 후기
                        </div>
                    </div>
                    <div class="row">
                        <div class="col review_GPT new-text-gray new-fs-7 ms-4 mb-2">
                            <!--/* GPT 요약 */-->
                        </div>
                    </div>

                </div>
                <div class="row text-end p-0 m-0">
                    <span class="col text-end pe-0 m-0">
                        <button type="button" class="favorite-button new-input-none bg-white pe-0 ps-0">
                            <span class="review-heart material-symbols-outlined fs-5 text-danger" data-review-id="{{review.id}}">favorite</span>
                        </button>
                    </span>
                    <span class="col-auto ps-2 pe-4 p-0 m-0 reviewLikeCount new-fs-8 new-text-gray"></span>
                </div>
            </div>

        </div>
    </div>
</div>

<div th:replace="~{common/navi::sidebarLeft}"></div>
<script type="text/javascript" src="/public/js/goods/goodsDetailPage.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>